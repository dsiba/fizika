// script.js
const tasks = [
  {
    section: 'Кинематика',
    difficulty: 'Лёгкий',
    question: 'Тело прошло 60 м за 3 с. Какова его скорость?',
    answer: '20',
    hints: ['Формула скорости: v = S / t', '60 / 3 = ?', 'Ответ: 20 м/с'],
  },
  {
    section: 'Динамика',
    difficulty: 'Средний',
    question: 'Какова сила, если масса тела 10 кг и ускорение 2 м/с²?',
    answer: '20',
    hints: ['Формула силы: F = ma', '10 × 2 = ?', 'Ответ: 20 Н'],
  },
  {
    section: 'Работа и энергия',
    difficulty: 'Сложный',
    question: 'Какую работу совершает сила 50 Н при перемещении на 4 м?',
    answer: '200',
    hints: ['Формула работы: A = F × s', '50 × 4 = ?', 'Ответ: 200 Дж'],
  },
  {
    section: 'Кинематика',
    difficulty: 'Лёгкий',
    question: 'Тело прошло 60 м за 3 с. Какова его скорость?',
    answer: '20',
    hints: ['Формула скорости: v = S / t', '60 / 3 = ?', 'Ответ: 20 м/с'],
  },
  {
    section: 'Кинематика',
    difficulty: 'Лёгкий',
    question:
      'Автомобиль движется со скоростью 72 км/ч. Переведите скорость в м/с.',
    answer: '20',
    hints: [
      '1 км/ч = 1000 м / 3600 с ≈ 0,277 м/с',
      '72 × (1000 / 3600) = ?',
      'Ответ: 20 м/с',
    ],
  },
  {
    section: 'Кинематика',
    difficulty: 'Средний',
    question:
      'Тело начинает движение из состояния покоя с ускорением 2 м/с². Какой путь оно пройдёт за 5 с?',
    answer: '25',
    hints: [
      'Формула пути при равноускоренном движении: S = (a × t²) / 2',
      '(2 × 5²) / 2 = ?',
      'Ответ: 25 м',
    ],
  },
  {
    section: 'Кинематика',
    difficulty: 'Средний',
    question:
      'Тело брошено вертикально вверх со скоростью 20 м/с. На какую максимальную высоту оно поднимется? (g = 10 м/с²)',
    answer: '20',
    hints: [
      'Максимальная высота: h = v₀² / (2g)',
      '20² / (2 × 10) = ?',
      'Ответ: 20 м',
    ],
  },
  {
    section: 'Кинематика',
    difficulty: 'Сложный',
    question:
      'Два тела начинают движение навстречу друг другу из точек, находящихся на расстоянии 200 м. Первое тело движется со скоростью 10 м/с, второе — 15 м/с. Через какое время они встретятся?',
    answer: '8',
    hints: [
      'Относительная скорость: v₁ + v₂ = 25 м/с',
      'Время встречи: t = S / (v₁ + v₂)',
      '200 / 25 = ?',
      'Ответ: 8 с',
    ],
  },
  {
    section: 'Динамика',
    difficulty: 'Лёгкий',
    question:
      'На тело массой 5 кг действует сила 20 Н. Какое ускорение оно приобретает?',
    answer: '4',
    hints: [
      'Второй закон Ньютона: F = m × a',
      'a = F / m = 20 / 5',
      'Ответ: 4 м/с²',
    ],
  },
  {
    section: 'Динамика',
    difficulty: 'Лёгкий',
    question: 'Чему равен вес тела массой 10 кг на Земле? (g = 10 м/с²)',
    answer: '100',
    hints: ['Вес: P = m × g', '10 × 10 = ?', 'Ответ: 100 Н'],
  },
  {
    section: 'Динамика',
    difficulty: 'Средний',
    question:
      'Тело массой 2 кг движется по горизонтальной поверхности с ускорением 3 м/с² под действием силы 10 Н. Чему равна сила трения?',
    answer: '4',
    hints: ['F - Fтр = m × a', '10 - Fтр = 2 × 3 → Fтр = 10 - 6', 'Ответ: 4 Н'],
  },
  {
    section: 'Динамика',
    difficulty: 'Средний',
    question:
      'Лифт поднимается с ускорением 2 м/с². Чему равен вес человека массой 70 кг? (g = 10 м/с²)',
    answer: '840',
    hints: [
      'Вес в ускоряющемся лифте: P = m × (g + a)',
      '70 × (10 + 2) = ?',
      'Ответ: 840 Н',
    ],
  },
  {
    section: 'Динамика',
    difficulty: 'Сложный',
    question:
      'На наклонной плоскости с углом 30° лежит тело массой 5 кг. Коэффициент трения 0,2. Какое ускорение будет у тела? (g = 10 м/с²)',
    answer: '3.3',
    hints: [
      'Сила тяжести вдоль плоскости: F₁ = m × g × sin(30°)',
      'Сила трения: Fтр = μ × m × g × cos(30°)',
      'a = (F₁ - Fтр) / m',
      'Ответ: ≈3,3 м/с²',
    ],
  },
  {
    section: 'Термодинамика',
    difficulty: 'Лёгкий',
    question: 'Какова температура в Кельвинах, если по Цельсию 27°C?',
    answer: '300',
    hints: [
      'Формула перевода: T(K) = T(°C) + 273',
      '27 + 273 = ?',
      'Ответ: 300 K',
    ],
  },
  {
    section: 'Термодинамика',
    difficulty: 'Лёгкий',
    question:
      'Газ при постоянном давлении нагрели от 20°C до 40°C. Как изменился его объём (в разах)?',
    answer: '1.07',
    hints: [
      'Закон Гей-Люссака: V₁ / T₁ = V₂ / T₂',
      'T₁ = 293 K, T₂ = 313 K → V₂ / V₁ = 313 / 293 ≈ 1,07',
      'Ответ: увеличился в ≈1,07 раза',
    ],
  },
  {
    section: 'Термодинамика',
    difficulty: 'Средний',
    question:
      'Идеальный газ совершил работу 200 Дж, и его внутренняя энергия увеличилась на 50 Дж. Какое количество теплоты получил газ?',
    answer: '250',
    hints: [
      'Первое начало термодинамики: Q = ΔU + A',
      '50 + 200 = ?',
      'Ответ: 250 Дж',
    ],
  },
  {
    section: 'Термодинамика',
    difficulty: 'Средний',
    question:
      'Какое количество теплоты нужно для нагревания 2 кг воды от 20°C до 100°C? (c воды = 4200 Дж/(кг·°C))',
    answer: '672000',
    hints: ['Q = m × c × ΔT', '2 × 4200 × 80 = ?', 'Ответ: 672 000 Дж'],
  },
  {
    section: 'Термодинамика',
    difficulty: 'Сложный',
    question:
      'Идеальный газ расширяется по закону pV² = const. Начальный объём 1 м³, давление 100 кПа. Если объём увеличился в 2 раза, каким стало давление?',
    answer: '25',
    hints: [
      'p₁V₁² = p₂V₂² → p₂ = p₁ × (V₁ / V₂)²',
      '100 × (1 / 2)² = ?',
      'Ответ: 25 кПа',
    ],
  },
  {
    section: 'Электростатика',
    difficulty: 'Лёгкий',
    question: 'Чему равен заряд, если через проводник за 2 с прошло 10 Кл?',
    answer: '10',
    hints: [
      'Заряд Q = I × t, но здесь дан сам заряд',
      'Ответ: 10 Кл (время дано для отвлечения)',
    ],
  },
  {
    section: 'Электростатика',
    difficulty: 'Лёгкий',
    question:
      'Два одинаковых заряда по 5 нКл находятся на расстоянии 10 см. Чему равна сила Кулона между ними? (k = 9×10⁹ Н·м²/Кл²)',
    answer: '2.25e-5',
    hints: [
      'F = k × q₁ × q₂ / r²',
      '9×10⁹ × (5×10⁻⁹)² / (0,1)² = ?',
      'Ответ: 2,25×10⁻⁵ Н',
    ],
  },
  {
    section: 'Электростатика',
    difficulty: 'Средний',
    question:
      'Напряжённость электрического поля на расстоянии 0,5 м от точечного заряда равна 200 Н/Кл. Чему равен заряд? (k = 9×10⁹ Н·м²/Кл²)',
    answer: '5.56e-9',
    hints: [
      'E = k × |q| / r² → q = E × r² / k',
      '200 × (0,5)² / (9×10⁹) ≈ 5,56×10⁻⁹ Кл',
      'Ответ: ≈5,56 нКл',
    ],
  },
  {
    section: 'Электростатика',
    difficulty: 'Средний',
    question:
      'Два заряда +4 мкКл и -6 мкКл находятся на расстоянии 20 см. Чему равна сила их взаимодействия? (k = 9×10⁹ Н·м²/Кл²)',
    answer: '5.4',
    hints: [
      'F = k × |q₁ × q₂| / r²',
      '9×10⁹ × |4×10⁻⁶ × (-6)×10⁻⁶| / (0,2)² = 5,4 Н',
      'Ответ: 5,4 Н (притяжение)',
    ],
  },
  {
    section: 'Электростатика',
    difficulty: 'Сложный',
    question:
      'Три заряда: +2 нКл, +3 нКл и -5 нКл расположены в вершинах равностороннего треугольника со стороной 10 см. Чему равна результирующая сила, действующая на заряд +2 нКл? (k = 9×10⁹ Н·м²/Кл²)',
    answer: '1.56e-5',
    hints: [
      'Рассчитайте силы от каждого заряда по отдельности',
      'Сложите векторы сил (угол 60°)',
      'Ответ: ≈1,56×10⁻⁵ Н',
    ],
  },
  {
    section: 'Оптика',
    difficulty: 'Лёгкий',
    question:
      'Чему равен угол преломления, если угол падения 30°, а показатель преломления среды 1,5? (sin(30°) = 0,5)',
    answer: '19.47',
    hints: [
      'Закон Снеллиуса: n₁ × sin(θ₁) = n₂ × sin(θ₂)',
      '1 × 0,5 = 1,5 × sin(θ₂) → θ₂ ≈ arcsin(0,333)',
      'Ответ: ≈19,47°',
    ],
  },
  {
    section: 'Оптика',
    difficulty: 'Лёгкий',
    question: 'Какое фокусное расстояние у линзы с оптической силой 4 дптр?',
    answer: '0.25',
    hints: [
      'Фокусное расстояние: f = 1 / D',
      '1 / 4 = ?',
      'Ответ: 0,25 м (25 см)',
    ],
  },
  {
    section: 'Оптика',
    difficulty: 'Средний',
    question:
      'Предмет высотой 2 см расположен на расстоянии 30 см от собирающей линзы с фокусным расстоянием 20 см. На каком расстоянии от линзы получится изображение?',
    answer: '60',
    hints: [
      "Формула линзы: 1/f = 1/d + 1/f'",
      "1/20 = 1/30 + 1/f' → f' = 60 см",
      'Ответ: 60 см',
    ],
  },
  {
    section: 'Оптика',
    difficulty: 'Средний',
    question:
      'На сколько увеличится путь света в стекле (n = 1,5) по сравнению с вакуумом, если геометрическая длина пути 2 м?',
    answer: '1',
    hints: [
      'Оптический путь: L = n × l',
      'Разница: ΔL = (1,5 - 1) × 2 = 1 м',
      'Ответ: 1 м',
    ],
  },
  {
    section: 'Оптика',
    difficulty: 'Сложный',
    question:
      'Дифракционная решётка имеет 500 штрихов на мм. Под каким углом будет виден максимум первого порядка для света с длиной волны 600 нм?',
    answer: '17.46',
    hints: [
      'Формула решётки: d × sin(θ) = m × λ',
      'd = 1 мм / 500 = 2×10⁻⁶ м, m = 1',
      'θ = arcsin(600×10⁻⁹ / 2×10⁻⁶) ≈ 17,46°',
      'Ответ: ≈17,46°',
    ],
  },
  {
    section: 'Квантовая физика',
    difficulty: 'Лёгкий',
    question:
      'Какова энергия фотона с длиной волны 500 нм? (h = 6,63×10⁻³⁴ Дж·с, c = 3×10⁸ м/с)',
    answer: '3.98e-19',
    hints: [
      'E = h × c / λ',
      '6,63×10⁻³⁴ × 3×10⁸ / (500×10⁻⁹) ≈ 3,98×10⁻¹⁹ Дж',
      'Ответ: ≈3,98×10⁻¹⁹ Дж',
    ],
  },
  {
    section: 'Квантовая физика',
    difficulty: 'Лёгкий',
    question:
      'Чему равна работа выхода электрона из металла, если красная граница фотоэффекта 600 нм? (h = 6,63×10⁻³⁴ Дж·с, c = 3×10⁸ м/с)',
    answer: '3.31e-19',
    hints: [
      'Aвых = h × c / λкр',
      '6,63×10⁻³⁴ × 3×10⁸ / (600×10⁻⁹) ≈ 3,31×10⁻¹⁹ Дж',
      'Ответ: ≈3,31×10⁻¹⁹ Дж',
    ],
  },
  {
    section: 'Квантовая физика',
    difficulty: 'Средний',
    question: 'Какой импульс у фотона с энергией 4×10⁻¹⁹ Дж? (c = 3×10⁸ м/с)',
    answer: '1.33e-27',
    hints: [
      'Импульс фотона: p = E / c',
      '4×10⁻¹⁹ / 3×10⁸ ≈ 1,33×10⁻²⁷ кг·м/с',
      'Ответ: ≈1,33×10⁻²⁷ кг·м/с',
    ],
  },
  {
    section: 'Квантовая физика',
    difficulty: 'Средний',
    question:
      'Во сколько раз энергия фотона фиолетового света (400 нм) больше, чем красного (800 нм)?',
    answer: '2',
    hints: [
      'Энергия обратно пропорциональна длине волны',
      '800 / 400 = ?',
      'Ответ: в 2 раза',
    ],
  },
  {
    section: 'Квантовая физика',
    difficulty: 'Сложный',
    question:
      'Электрон в атоме водорода переходит с уровня n=4 на n=2. Какова длина волны испущенного фотона? (постоянная Ридберга R = 1,097×10⁷ м⁻¹)',
    answer: '486',
    hints: [
      'Формула Ридберга: 1/λ = R × (1/n₂² - 1/n₁²)',
      '1/λ = 1,097×10⁷ × (1/4 - 1/16) → λ ≈ 486 нм',
      'Ответ: ≈486 нм',
    ],
  },
  {
    section: 'Механика жидкостей',
    difficulty: 'Лёгкий',
    question:
      'Какое давление создаёт столб воды высотой 10 м? (ρ = 1000 кг/м³, g = 10 м/с²)',
    answer: '100000',
    hints: ['P = ρ × g × h', '1000 × 10 × 10 = ?', 'Ответ: 100 000 Па'],
  },
  {
    section: 'Механика жидкостей',
    difficulty: 'Лёгкий',
    question:
      'На тело объёмом 0,1 м³, погруженное в воду, действует выталкивающая сила... (ρ = 1000 кг/м³, g = 10 м/с²)',
    answer: '1000',
    hints: [
      'Архимедова сила: F = ρ × g × V',
      '1000 × 10 × 0,1 = ?',
      'Ответ: 1000 Н',
    ],
  },
  {
    section: 'Механика жидкостей',
    difficulty: 'Средний',
    question:
      'Вода течёт по трубе диаметром 4 см со скоростью 2 м/с. Каков расход воды?',
    answer: '0.0025',
    hints: [
      'Q = v × S, S = π × r²',
      'r = 0,02 м → Q = 2 × π × (0,02)² ≈ 0,0025 м³/с',
      'Ответ: ≈0,0025 м³/с',
    ],
  },
  {
    section: 'Механика жидкостей',
    difficulty: 'Средний',
    question:
      'В U-образной трубке находятся вода (ρ₁ = 1000 кг/м³) и масло (ρ₂ = 800 кг/м³). Разность уровней 5 см. Какова высота столба масла?',
    answer: '25',
    hints: [
      'P₁ = P₂ → ρ₁ × g × h₁ = ρ₂ × g × h₂',
      'h₂ = h₁ × (ρ₁ / ρ₂) = 5 × (1000 / 800) = 25 см',
      'Ответ: 25 см',
    ],
  },
  {
    section: 'Механика жидкостей',
    difficulty: 'Сложный',
    question:
      'Вода вытекает из бака через отверстие на глубине 5 м. С какой скоростью? (g = 10 м/с²)',
    answer: '10',
    hints: [
      'Формула Торричелли: v = √(2 × g × h)',
      '√(2 × 10 × 5) = ?',
      'Ответ: 10 м/с',
    ],
  },
  {
    section: 'Электродинамика',
    difficulty: 'Лёгкий',
    question:
      'Чему равно сопротивление проводника, если при напряжении 12 В сила тока 3 А?',
    answer: '4',
    hints: ['Закон Ома: R = U / I', '12 / 3 = ?', 'Ответ: 4 Ом'],
  },
  {
    section: 'Электродинамика',
    difficulty: 'Лёгкий',
    question: 'Какая мощность выделяется на резисторе 10 Ом при токе 2 А?',
    answer: '40',
    hints: ['P = I² × R', '2² × 10 = ?', 'Ответ: 40 Вт'],
  },
  {
    section: 'Электродинамика',
    difficulty: 'Средний',
    question:
      'Три резистора 2 Ом, 3 Ом и 5 Ом соединены последовательно. Чему равно общее сопротивление?',
    answer: '10',
    hints: ['Rобщ = R₁ + R₂ + R₃', '2 + 3 + 5 = ?', 'Ответ: 10 Ом'],
  },
  {
    section: 'Электродинамика',
    difficulty: 'Средний',
    question:
      'Конденсатор ёмкостью 5 мкФ заряжен до напряжения 100 В. Чему равна его энергия?',
    answer: '0.025',
    hints: [
      'W = C × U² / 2',
      '5×10⁻⁶ × 100² / 2 = 0,025 Дж',
      'Ответ: 0,025 Дж',
    ],
  },
  {
    section: 'Электродинамика',
    difficulty: 'Сложный',
    question:
      'Катушка индуктивностью 0,2 Гн подключена к источнику тока. За 0,01 с сила тока увеличилась от 0 до 5 А. Чему равна ЭДС самоиндукции?',
    answer: '100',
    hints: [
      'ЭДС самоиндукции: ε = -L × ΔI / Δt',
      '0,2 × 5 / 0,01 = 100 В',
      'Ответ: 100 В',
    ],
  },
  {
    section: 'Магнетизм',
    difficulty: 'Лёгкий',
    question:
      'Проводник длиной 0,5 м находится в магнитном поле 0,1 Тл перпендикулярно линиям индукции. Чему равна сила Ампера при токе 2 А?',
    answer: '0.1',
    hints: [
      'F = I × L × B × sin(α), α = 90°',
      '2 × 0,5 × 0,1 = ?',
      'Ответ: 0,1 Н',
    ],
  },
  {
    section: 'Магнетизм',
    difficulty: 'Лёгкий',
    question:
      'Электрон движется в магнитном поле 0,5 Тл со скоростью 10⁶ м/с перпендикулярно линиям индукции. Чему равна сила Лоренца? (e = 1,6×10⁻¹⁹ Кл)',
    answer: '8e-14',
    hints: [
      'F = e × v × B × sin(α), α = 90°',
      '1,6×10⁻¹⁹ × 10⁶ × 0,5 = 8×10⁻¹⁴ Н',
      'Ответ: 8×10⁻¹⁴ Н',
    ],
  },
  {
    section: 'Магнетизм',
    difficulty: 'Средний',
    question:
      'Прямой проводник длиной 1 м с током 10 А расположен под углом 30° к вектору магнитной индукции 0,2 Тл. Чему равна сила Ампера?',
    answer: '1',
    hints: [
      'F = I × L × B × sin(α)',
      '10 × 1 × 0,2 × sin(30°) = 1 Н',
      'Ответ: 1 Н',
    ],
  },
  {
    section: 'Магнетизм',
    difficulty: 'Средний',
    question:
      'В однородном магнитном поле 0,1 Тл вращается рамка площадью 0,01 м² с частотой 50 Гц. Чему равна амплитуда ЭДС индукции?',
    answer: '0.314',
    hints: [
      'ε₀ = B × S × ω, ω = 2π × ν',
      '0,1 × 0,01 × 2 × 3,14 × 50 ≈ 0,314 В',
      'Ответ: ≈0,314 В',
    ],
  },
  {
    section: 'Магнетизм',
    difficulty: 'Сложный',
    question:
      'Протон влетает в магнитное поле 0,5 Тл перпендикулярно линиям индукции со скоростью 10⁶ м/с. Чему равен радиус траектории? (m_p = 1,67×10⁻²⁷ кг, e = 1,6×10⁻¹⁹ Кл)',
    answer: '0.0209',
    hints: [
      'r = (m × v) / (e × B)',
      '(1,67×10⁻²⁷ × 10⁶) / (1,6×10⁻¹⁹ × 0,5) ≈ 0,0209 м',
      'Ответ: ≈2,09 см',
    ],
  },
  {
    section: 'Колебания и волны',
    difficulty: 'Лёгкий',
    question: 'Период колебаний маятника 2 с. Чему равна частота?',
    answer: '0.5',
    hints: ['ν = 1 / T', '1 / 2 = ?', 'Ответ: 0,5 Гц'],
  },
  {
    section: 'Колебания и волны',
    difficulty: 'Лёгкий',
    question:
      'Длина звуковой волны 0,5 м, скорость звука 340 м/с. Чему равна частота?',
    answer: '680',
    hints: ['ν = v / λ', '340 / 0,5 = ?', 'Ответ: 680 Гц'],
  },
  {
    section: 'Колебания и волны',
    difficulty: 'Средний',
    question:
      'Груз массой 0,1 кг на пружине совершает колебания с частотой 2 Гц. Чему равна жёсткость пружины?',
    answer: '15.8',
    hints: [
      'ν = (1 / 2π) × √(k / m) → k = (2πν)² × m',
      '(2 × 3,14 × 2)² × 0,1 ≈ 15,8 Н/м',
      'Ответ: ≈15,8 Н/м',
    ],
  },
  {
    section: 'Колебания и волны',
    difficulty: 'Средний',
    question:
      'Чему равна скорость волны в струне, если при длине 1 м и натяжении 100 Н её масса 0,01 кг?',
    answer: '100',
    hints: [
      'v = √(T / μ), μ = m / L',
      '√(100 / 0,01) = 100 м/с',
      'Ответ: 100 м/с',
    ],
  },
  {
    section: 'Колебания и волны',
    difficulty: 'Сложный',
    question:
      'Два когерентных источника звука (λ = 0,5 м) находятся на расстоянии 3 м друг от друга. На каком расстоянии от первого источника будет первый максимум интерференции? (L >> d)',
    answer: '3.125',
    hints: [
      'Условие максимума: ΔL = m × λ',
      'Первый максимум (m=1): ΔL = 0,5 м',
      'x ≈ (d² + λ²) / (2λ) ≈ 3,125 м',
      'Ответ: ≈3,125 м',
    ],
  },
  {
    section: 'Ядерная физика',
    difficulty: 'Лёгкий',
    question: 'Сколько протонов в ядре атома углерода-12?',
    answer: '6',
    hints: ['Порядковый номер углерода в таблице Менделеева', 'Ответ: 6'],
  },
  {
    section: 'Ядерная физика',
    difficulty: 'Лёгкий',
    question: 'Какая частица испускается при β⁻-распаде?',
    answer: 'электрон',
    hints: [
      'β⁻-распад: нейтрон → протон + электрон + антинейтрино',
      'Ответ: электрон (e⁻)',
    ],
  },
  {
    section: 'Ядерная физика',
    difficulty: 'Средний',
    question:
      'Период полураспада изотопа 10 дней. Какая часть ядер останется через 30 дней?',
    answer: '0.125',
    hints: [
      'N = N₀ × (1/2)^(t / T)',
      '(1/2)^(30 / 10) = 1/8 = 0,125',
      'Ответ: 0,125 (12,5%)',
    ],
  },
  {
    section: 'Ядерная физика',
    difficulty: 'Средний',
    question:
      'При делении ядра урана-235 выделяется 200 МэВ энергии. Сколько энергии выделится при делении 1 г урана-235? (N_A = 6×10²³ моль⁻¹)',
    answer: '8.2e10',
    hints: [
      'E = (m / M) × N_A × E₁',
      '(1 / 235) × 6×10²³ × 200 МэВ ≈ 8,2×10¹⁰ Дж',
      'Ответ: ≈8,2×10¹⁰ Дж',
    ],
  },
  {
    section: 'Ядерная физика',
    difficulty: 'Сложный',
    question:
      'Найдите дефект массы ядра гелия-4 (m = 4,0015 а.е.м.). Масса протона 1,0073 а.е.м., нейтрона 1,0087 а.е.м.',
    answer: '0.0303',
    hints: [
      'Δm = Z × m_p + N × m_n - m_ядра',
      '2 × 1,0073 + 2 × 1,0087 - 4,0015 ≈ 0,0303 а.е.м.',
      'Ответ: ≈0,0303 а.е.м.',
    ],
  },
];

let currentTask = null;
let hintStep = 0;
let score = parseInt(localStorage.getItem('score')) || 0;
let level = parseInt(localStorage.getItem('level')) || 1;
let achievements = JSON.parse(localStorage.getItem('achievements')) || [];
let difficulty = localStorage.getItem('difficulty') || 'Лёгкий';

const questionEl = document.getElementById('question');
const sectionEl = document.getElementById('section');
const hintEl = document.getElementById('hint');
const scoreEl = document.getElementById('score');
const achievementsEl = document.getElementById('achievements');
const leaderboardEl = document.getElementById('leaderboard');

function loadLeaderboard() {
  const board = JSON.parse(localStorage.getItem('leaderboard')) || [];
  leaderboardEl.innerHTML = board
    .sort((a, b) => b.score - a.score)
    .slice(0, 5)
    .map(entry => `<li>${entry.name}: ${entry.score}</li>`)
    .join('');
}

function saveLeaderboard() {
  const name = prompt('Введите ваше имя для таблицы рекордов:') || 'Аноним';
  const board = JSON.parse(localStorage.getItem('leaderboard')) || [];
  board.push({ name, score });
  localStorage.setItem('leaderboard', JSON.stringify(board));
  loadLeaderboard();
}

function getRandomTask() {
  const filtered = tasks.filter(t => t.difficulty === difficulty);
  return filtered[Math.floor(Math.random() * filtered.length)];
}

function showTask() {
  hintStep = 0;
  currentTask = getRandomTask();
  questionEl.textContent = currentTask.question;
  sectionEl.textContent = `Раздел: ${currentTask.section}`;
  hintEl.style.display = 'none';
  hintEl.textContent = '';
  document.getElementById('answer').value = '';
}

function showHint() {
  if (hintStep < currentTask.hints.length) {
    hintEl.textContent = currentTask.hints[hintStep];
    hintEl.style.display = 'block';
    hintStep++;
  }
}

function updateStats() {
  scoreEl.textContent = `Баллы: ${score} | Уровень: ${level}`;
  localStorage.setItem('score', score);
  localStorage.setItem('level', level);
  localStorage.setItem('difficulty', difficulty);
}

function checkAchievements() {
  const levels = [
    { value: 20, text: '🎉 Первый успех!' },
    { value: 50, text: '🏅 Продвинутый уровень!' },
    { value: 100, text: '🥇 Мастер физики!' },
  ];

  levels.forEach(a => {
    if (score >= a.value && !achievements.includes(a.text)) {
      achievements.push(a.text);
      const div = document.createElement('div');
      div.className = 'achievement';
      div.textContent = a.text;
      achievementsEl.appendChild(div);
    }
  });
  localStorage.setItem('achievements', JSON.stringify(achievements));
}

function submitAnswer() {
  const userAnswer = document.getElementById('answer').value.trim();
  if (userAnswer === currentTask.answer) {
    alert('Правильно!');
    score += 10;
    if (score % 30 === 0) level++;
    updateStats();
    checkAchievements();
    showTask();
  } else {
    alert("Неправильно. Попробуйте ещё раз или нажмите 'Подсказка'");
  }
}

document.getElementById('difficulty').value = difficulty;
document.getElementById('difficulty').addEventListener('change', e => {
  difficulty = e.target.value;
  localStorage.setItem('difficulty', difficulty);
  showTask();
});

window.addEventListener('beforeunload', () => {
  saveLeaderboard();
});

updateStats();
checkAchievements();
showTask();
loadLeaderboard();
